{"ast":null,"code":"// Initial state of shop\nconst initialStateShop = {\n  cart: [],\n  groups: [],\n  order: []\n};\n\nconst shopReducer = (state = initialStateShop, {\n  type,\n  payload\n}) => {\n  switch (type) {\n    case \"INITIAL_CART\":\n      return {\n        cart: payload.cart\n      };\n\n    case \"INITIAL_ORDER\":\n      return { ...state,\n        order: payload.order\n      };\n\n    case \"SETTING_GROUP\":\n      const itemsInCart = payload.itemsInCart;\n      const sorted = itemsInCart.sort((a, b) => b[\"customerId\"] - a[\"customerId\"]);\n      console.log(sorted);\n      let userId = null;\n      let groupTemp = [];\n\n      for (const key in itemsInCart) {\n        if (userId === itemsInCart[key].customerId) {\n          const index = groupTemp.findIndex(group => group.userId === itemsInCart[key].customerId);\n          const newItems = groupTemp[index].items.concat(itemsInCart[key]);\n          groupTemp[index] = { ...groupTemp[index],\n            items: newItems\n          };\n        } else {\n          groupTemp.push({\n            id: +key,\n            userId: itemsInCart[key].customerId,\n            userName: itemsInCart[key].customerName,\n            items: [itemsInCart[key]]\n          });\n          userId = itemsInCart[key].customerId;\n        }\n      }\n\n      return { ...state,\n        groups: groupTemp\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default shopReducer;","map":{"version":3,"sources":["/Users/mac/Documents/GitHub/food_online/src/app/store/reducers/shop-reducer.js"],"names":["initialStateShop","cart","groups","order","shopReducer","state","type","payload","itemsInCart","sorted","sort","a","b","console","log","userId","groupTemp","key","customerId","index","findIndex","group","newItems","items","concat","push","id","userName","customerName"],"mappings":"AAAA;AACA,MAAMA,gBAAgB,GAAG;AACvBC,EAAAA,IAAI,EAAE,EADiB;AAEvBC,EAAAA,MAAM,EAAE,EAFe;AAGvBC,EAAAA,KAAK,EAAE;AAHgB,CAAzB;;AAMA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGL,gBAAT,EAA2B;AAAEM,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAA3B,KAAiD;AACnE,UAAQD,IAAR;AACE,SAAK,cAAL;AACE,aAAO;AAAEL,QAAAA,IAAI,EAAEM,OAAO,CAACN;AAAhB,OAAP;;AACF,SAAK,eAAL;AACE,aAAO,EACL,GAAGI,KADE;AAELF,QAAAA,KAAK,EAAEI,OAAO,CAACJ;AAFV,OAAP;;AAIF,SAAK,eAAL;AACE,YAAMK,WAAW,GAAGD,OAAO,CAACC,WAA5B;AACA,YAAMC,MAAM,GAAGD,WAAW,CAACE,IAAZ,CACb,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAAC,YAAD,CAAD,GAAkBD,CAAC,CAAC,YAAD,CADhB,CAAf;AAGAE,MAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AACA,UAAIM,MAAM,GAAG,IAAb;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,WAAK,MAAMC,GAAX,IAAkBT,WAAlB,EAA+B;AAC7B,YAAIO,MAAM,KAAKP,WAAW,CAACS,GAAD,CAAX,CAAiBC,UAAhC,EAA4C;AAC1C,gBAAMC,KAAK,GAAGH,SAAS,CAACI,SAAV,CACXC,KAAD,IAAWA,KAAK,CAACN,MAAN,KAAiBP,WAAW,CAACS,GAAD,CAAX,CAAiBC,UADjC,CAAd;AAGA,gBAAMI,QAAQ,GAAGN,SAAS,CAACG,KAAD,CAAT,CAAiBI,KAAjB,CAAuBC,MAAvB,CAA8BhB,WAAW,CAACS,GAAD,CAAzC,CAAjB;AACAD,UAAAA,SAAS,CAACG,KAAD,CAAT,GAAmB,EACjB,GAAGH,SAAS,CAACG,KAAD,CADK;AAEjBI,YAAAA,KAAK,EAAED;AAFU,WAAnB;AAID,SATD,MASO;AACLN,UAAAA,SAAS,CAACS,IAAV,CAAe;AACbC,YAAAA,EAAE,EAAE,CAACT,GADQ;AAEbF,YAAAA,MAAM,EAAEP,WAAW,CAACS,GAAD,CAAX,CAAiBC,UAFZ;AAGbS,YAAAA,QAAQ,EAAEnB,WAAW,CAACS,GAAD,CAAX,CAAiBW,YAHd;AAIbL,YAAAA,KAAK,EAAE,CAACf,WAAW,CAACS,GAAD,CAAZ;AAJM,WAAf;AAMAF,UAAAA,MAAM,GAAGP,WAAW,CAACS,GAAD,CAAX,CAAiBC,UAA1B;AACD;AACF;;AAED,aAAO,EACL,GAAGb,KADE;AAELH,QAAAA,MAAM,EAAEc;AAFH,OAAP;;AAIF;AACE,aAAOX,KAAP;AA1CJ;AA4CD,CA7CD;;AA+CA,eAAeD,WAAf","sourcesContent":["// Initial state of shop\nconst initialStateShop = {\n  cart: [],\n  groups: [],\n  order: [],\n};\n\nconst shopReducer = (state = initialStateShop, { type, payload }) => {\n  switch (type) {\n    case \"INITIAL_CART\":\n      return { cart: payload.cart };\n    case \"INITIAL_ORDER\":\n      return {\n        ...state,\n        order: payload.order,\n      };\n    case \"SETTING_GROUP\":\n      const itemsInCart = payload.itemsInCart;\n      const sorted = itemsInCart.sort(\n        (a, b) => b[\"customerId\"] - a[\"customerId\"]\n      );\n      console.log(sorted);\n      let userId = null;\n      let groupTemp = [];\n      for (const key in itemsInCart) {\n        if (userId === itemsInCart[key].customerId) {\n          const index = groupTemp.findIndex(\n            (group) => group.userId === itemsInCart[key].customerId\n          );\n          const newItems = groupTemp[index].items.concat(itemsInCart[key]);\n          groupTemp[index] = {\n            ...groupTemp[index],\n            items: newItems,\n          };\n        } else {\n          groupTemp.push({\n            id: +key,\n            userId: itemsInCart[key].customerId,\n            userName: itemsInCart[key].customerName,\n            items: [itemsInCart[key]],\n          });\n          userId = itemsInCart[key].customerId;\n        }\n      }\n\n      return {\n        ...state,\n        groups: groupTemp,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default shopReducer;\n"]},"metadata":{},"sourceType":"module"}