{"ast":null,"code":"// Initial state of shop\nconst initialStateShop = {\n  cart: [],\n  groups: [],\n  order: []\n};\n\nconst shopReducer = (state = initialStateShop, {\n  type,\n  payload\n}) => {\n  switch (type) {\n    case \"INITIAL_CART\":\n      return {\n        cart: payload.cart\n      };\n\n    case \"INITIAL_ORDER\":\n      return { ...state,\n        order: payload.order\n      };\n\n    case \"SETTING_GROUP\":\n      const itemsInCart = payload.itemsInCart;\n      const sorted = itemsInCart.sort((a, b) => {\n        if (a.customerId < b.customerId) return -1;\n        if (a.customerId > b.customerId) return 1;\n        return 0;\n      });\n      console.log(sorted);\n      let userId = null;\n      let groupTemp = [];\n\n      for (const key in itemsInCart) {\n        if (userId === itemsInCart[key].customerId) {\n          const index = groupTemp.findIndex(group => group.userId === itemsInCart[key].customerId);\n          const newItems = groupTemp[index].items.concat(itemsInCart[key]);\n          groupTemp[index] = { ...groupTemp[index],\n            items: newItems\n          };\n        } else {\n          groupTemp.push({\n            id: +key,\n            userId: itemsInCart[key].customerId,\n            userName: itemsInCart[key].customerName,\n            items: [itemsInCart[key]]\n          });\n          userId = itemsInCart[key].customerId;\n        }\n      }\n\n      return { ...state,\n        groups: groupTemp\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default shopReducer;","map":{"version":3,"sources":["/Users/mac/Documents/GitHub/food_online/src/app/store/reducers/shop-reducer.js"],"names":["initialStateShop","cart","groups","order","shopReducer","state","type","payload","itemsInCart","sorted","sort","a","b","customerId","console","log","userId","groupTemp","key","index","findIndex","group","newItems","items","concat","push","id","userName","customerName"],"mappings":"AAAA;AACA,MAAMA,gBAAgB,GAAG;AACvBC,EAAAA,IAAI,EAAE,EADiB;AAEvBC,EAAAA,MAAM,EAAE,EAFe;AAGvBC,EAAAA,KAAK,EAAE;AAHgB,CAAzB;;AAMA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGL,gBAAT,EAA2B;AAAEM,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAA3B,KAAiD;AACnE,UAAQD,IAAR;AACE,SAAK,cAAL;AACE,aAAO;AAAEL,QAAAA,IAAI,EAAEM,OAAO,CAACN;AAAhB,OAAP;;AACF,SAAK,eAAL;AACE,aAAO,EACL,GAAGI,KADE;AAELF,QAAAA,KAAK,EAAEI,OAAO,CAACJ;AAFV,OAAP;;AAIF,SAAK,eAAL;AACE,YAAMK,WAAW,GAAGD,OAAO,CAACC,WAA5B;AACA,YAAMC,MAAM,GAAGD,WAAW,CAACE,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACxC,YAAID,CAAC,CAACE,UAAF,GAAeD,CAAC,CAACC,UAArB,EAAiC,OAAO,CAAC,CAAR;AACjC,YAAIF,CAAC,CAACE,UAAF,GAAeD,CAAC,CAACC,UAArB,EAAiC,OAAO,CAAP;AACjC,eAAO,CAAP;AACD,OAJc,CAAf;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AACA,UAAIO,MAAM,GAAG,IAAb;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,WAAK,MAAMC,GAAX,IAAkBV,WAAlB,EAA+B;AAC7B,YAAIQ,MAAM,KAAKR,WAAW,CAACU,GAAD,CAAX,CAAiBL,UAAhC,EAA4C;AAC1C,gBAAMM,KAAK,GAAGF,SAAS,CAACG,SAAV,CACXC,KAAD,IAAWA,KAAK,CAACL,MAAN,KAAiBR,WAAW,CAACU,GAAD,CAAX,CAAiBL,UADjC,CAAd;AAGA,gBAAMS,QAAQ,GAAGL,SAAS,CAACE,KAAD,CAAT,CAAiBI,KAAjB,CAAuBC,MAAvB,CAA8BhB,WAAW,CAACU,GAAD,CAAzC,CAAjB;AACAD,UAAAA,SAAS,CAACE,KAAD,CAAT,GAAmB,EACjB,GAAGF,SAAS,CAACE,KAAD,CADK;AAEjBI,YAAAA,KAAK,EAAED;AAFU,WAAnB;AAID,SATD,MASO;AACLL,UAAAA,SAAS,CAACQ,IAAV,CAAe;AACbC,YAAAA,EAAE,EAAE,CAACR,GADQ;AAEbF,YAAAA,MAAM,EAAER,WAAW,CAACU,GAAD,CAAX,CAAiBL,UAFZ;AAGbc,YAAAA,QAAQ,EAAEnB,WAAW,CAACU,GAAD,CAAX,CAAiBU,YAHd;AAIbL,YAAAA,KAAK,EAAE,CAACf,WAAW,CAACU,GAAD,CAAZ;AAJM,WAAf;AAMAF,UAAAA,MAAM,GAAGR,WAAW,CAACU,GAAD,CAAX,CAAiBL,UAA1B;AACD;AACF;;AAED,aAAO,EACL,GAAGR,KADE;AAELH,QAAAA,MAAM,EAAEe;AAFH,OAAP;;AAIF;AACE,aAAOZ,KAAP;AA5CJ;AA8CD,CA/CD;;AAiDA,eAAeD,WAAf","sourcesContent":["// Initial state of shop\nconst initialStateShop = {\n  cart: [],\n  groups: [],\n  order: [],\n};\n\nconst shopReducer = (state = initialStateShop, { type, payload }) => {\n  switch (type) {\n    case \"INITIAL_CART\":\n      return { cart: payload.cart };\n    case \"INITIAL_ORDER\":\n      return {\n        ...state,\n        order: payload.order,\n      };\n    case \"SETTING_GROUP\":\n      const itemsInCart = payload.itemsInCart;\n      const sorted = itemsInCart.sort((a, b) => {\n        if (a.customerId < b.customerId) return -1;\n        if (a.customerId > b.customerId) return 1;\n        return 0;\n      });\n      console.log(sorted);\n      let userId = null;\n      let groupTemp = [];\n      for (const key in itemsInCart) {\n        if (userId === itemsInCart[key].customerId) {\n          const index = groupTemp.findIndex(\n            (group) => group.userId === itemsInCart[key].customerId\n          );\n          const newItems = groupTemp[index].items.concat(itemsInCart[key]);\n          groupTemp[index] = {\n            ...groupTemp[index],\n            items: newItems,\n          };\n        } else {\n          groupTemp.push({\n            id: +key,\n            userId: itemsInCart[key].customerId,\n            userName: itemsInCart[key].customerName,\n            items: [itemsInCart[key]],\n          });\n          userId = itemsInCart[key].customerId;\n        }\n      }\n\n      return {\n        ...state,\n        groups: groupTemp,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default shopReducer;\n"]},"metadata":{},"sourceType":"module"}